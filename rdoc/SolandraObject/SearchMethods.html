<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Module: DatastaxRails::SearchMethods</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/datastax_rails/relation/search_methods.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-extending">#extending</a>
    
    <li><a href="#method-i-fulltext">#fulltext</a>
    
    <li><a href="#method-i-greater_than">#greater_than</a>
    
    <li><a href="#method-i-group">#group</a>
    
    <li><a href="#method-i-less_than">#less_than</a>
    
    <li><a href="#method-i-limit">#limit</a>
    
    <li><a href="#method-i-offset">#offset</a>
    
    <li><a href="#method-i-order">#order</a>
    
    <li><a href="#method-i-page">#page</a>
    
    <li><a href="#method-i-paginate">#paginate</a>
    
    <li><a href="#method-i-per_page">#per_page</a>
    
    <li><a href="#method-i-query_parser">#query_parser</a>
    
    <li><a href="#method-i-reverse_order">#reverse_order</a>
    
    <li><a href="#method-i-search">#search</a>
    
    <li><a href="#method-i-where">#where</a>
    
    <li><a href="#method-i-where_not">#where_not</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../DatastaxRails.html">SolandraObject</a>
  
    <li><a href="../DatastaxRails/AssociationTypeMismatch.html">SolandraObject::AssociationTypeMismatch</a>
  
    <li><a href="../DatastaxRails/Associations.html">SolandraObject::Associations</a>
  
    <li><a href="../DatastaxRails/Associations/Builder.html">SolandraObject::Associations::Builder</a>
  
    <li><a href="../DatastaxRails/Associations/Builder/BelongsTo.html">SolandraObject::Associations::Builder::BelongsTo</a>
  
    <li><a href="../DatastaxRails/Associations/ClassMethods.html">SolandraObject::Associations::ClassMethods</a>
  
    <li><a href="../DatastaxRails/AttributeMethods.html">SolandraObject::AttributeMethods</a>
  
    <li><a href="../DatastaxRails/AttributeMethods/ClassMethods.html">SolandraObject::AttributeMethods::ClassMethods</a>
  
    <li><a href="../DatastaxRails/Base.html">SolandraObject::Base</a>
  
    <li><a href="../DatastaxRails/CassandraFinderMethods.html">SolandraObject::CassandraFinderMethods</a>
  
    <li><a href="../DatastaxRails/CassandraFinderMethods/ClassMethods.html">SolandraObject::CassandraFinderMethods::ClassMethods</a>
  
    <li><a href="../DatastaxRails/DeleteRestrictionError.html">SolandraObject::DeleteRestrictionError</a>
  
    <li><a href="../DatastaxRails/FinderMethods.html">SolandraObject::FinderMethods</a>
  
    <li><a href="../DatastaxRails/ModificationMethods.html">SolandraObject::ModificationMethods</a>
  
    <li><a href="../DatastaxRails/NamedScope.html">SolandraObject::NamedScope</a>
  
    <li><a href="../DatastaxRails/NamedScope/ClassMethods.html">SolandraObject::NamedScope::ClassMethods</a>
  
    <li><a href="../DatastaxRails/Railtie.html">SolandraObject::Railtie</a>
  
    <li><a href="../DatastaxRails/RecordNotFound.html">SolandraObject::RecordNotFound</a>
  
    <li><a href="../DatastaxRails/RecordNotSaved.html">SolandraObject::RecordNotSaved</a>
  
    <li><a href="../DatastaxRails/Reflection.html">SolandraObject::Reflection</a>
  
    <li><a href="../DatastaxRails/Reflection/ClassMethods.html">SolandraObject::Reflection::ClassMethods</a>
  
    <li><a href="../DatastaxRails/Reflection/MacroReflection.html">SolandraObject::Reflection::MacroReflection</a>
  
    <li><a href="../DatastaxRails/Relation.html">SolandraObject::Relation</a>
  
    <li><a href="../DatastaxRails/SearchMethods.html">SolandraObject::SearchMethods</a>
  
    <li><a href="../DatastaxRails/SolandraObjectError.html">SolandraObject::SolandraObjectError</a>
  
    <li><a href="../DatastaxRails/SpawnMethods.html">SolandraObject::SpawnMethods</a>
  
    <li><a href="../DatastaxRails/SunspotAdapters.html">SolandraObject::SunspotAdapters</a>
  
    <li><a href="../DatastaxRails/SunspotAdapters/SolandraObjectDataAccessor.html">SolandraObject::SunspotAdapters::SolandraObjectDataAccessor</a>
  
    <li><a href="../DatastaxRails/SunspotAdapters/SolandraObjectInstanceAdapter.html">SolandraObject::SunspotAdapters::SolandraObjectInstanceAdapter</a>
  
    <li><a href="../DatastaxRails/Validations.html">SolandraObject::Validations</a>
  
    <li><a href="../DatastaxRails/Validations/ClassMethods.html">SolandraObject::Validations::ClassMethods</a>
  
    <li><a href="../DatastaxRails/Validations/UniquenessValidator.html">SolandraObject::Validations::UniquenessValidator</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module DatastaxRails::SearchMethods</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-extending" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extending</span><span
            class="method-args">(*modules)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Used to extend a scope with additional methods, either through  a module or
a block provided</p>

<p>The object returned is a relation which can be further extended</p>
          

          
          <div class="method-source-code" id="extending-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extending</span>(*<span class="ruby-identifier">modules</span>)
  <span class="ruby-identifier">modules</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>(&amp;<span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:apply_modules</span>, <span class="ruby-identifier">modules</span>.<span class="ruby-identifier">flatten</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- extending-source -->
          
        </div>

        

        
      </div><!-- extending-method -->

    
      <div id="method-i-fulltext" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fulltext</span><span
            class="method-args">(query, opts = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Specifies a full text search string to be processed by SOLR</p>

<pre>Model.fulltext(&quot;john smith&quot;)</pre>

<p>You can also pass in an options hash with the following options:</p>

<pre class="ruby">* :<span class="ruby-identifier">fields</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">list</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">fields</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">search</span> <span class="ruby-identifier">instead</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">default</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">all</span> <span class="ruby-identifier">fields</span>
* :<span class="ruby-identifier">highlight</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">List</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">fields</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">retrieve</span> <span class="ruby-identifier">highlights</span> <span class="ruby-keyword">for</span>.  <span class="ruby-constant">Note</span> <span class="ruby-identifier">that</span> <span class="ruby-identifier">highlighted</span> <span class="ruby-identifier">fields</span> *<span class="ruby-identifier">must</span>* <span class="ruby-identifier">be</span> <span class="ruby-operator">+</span>:<span class="ruby-identifier">stored</span><span class="ruby-operator">+</span>

 <span class="ruby-constant">Model</span>.<span class="ruby-identifier">fulltext</span>(<span class="ruby-string">&quot;john smith&quot;</span>, :<span class="ruby-identifier">fields</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">title</span>])
 <span class="ruby-constant">Model</span>.<span class="ruby-identifier">fulltext</span>(<span class="ruby-string">&quot;john smith&quot;</span>, :<span class="ruby-identifier">hightlight</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">body</span>])
</pre>
          

          
          <div class="method-source-code" id="fulltext-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fulltext</span>(<span class="ruby-identifier">query</span>, <span class="ruby-identifier">opts</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">query</span>.<span class="ruby-identifier">blank?</span>
  
  <span class="ruby-identifier">opts</span>[<span class="ruby-value">:query</span>] = <span class="ruby-identifier">query</span>
  
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">fulltext_values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">opts</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- fulltext-source -->
          
        </div>

        

        
      </div><!-- fulltext-method -->

    
      <div id="method-i-greater_than" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">greater_than</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>See documentation for <code>where</code></p>
          

          
          <div class="method-source-code" id="greater_than-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">greater_than</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#greater_than can only be called after an appropriate where call. e.g. where(:created_at).greater_than(1.day.ago)&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- greater_than-source -->
          
        </div>

        

        
      </div><!-- greater_than-method -->

    
      <div id="method-i-group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">group</span><span
            class="method-args">(*attrs)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Group results by one or more attributes only returning the top result for
each group.</p>

<pre>Model.group(:program_id)</pre>
          

          
          <div class="method-source-code" id="group-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group</span>(*<span class="ruby-identifier">attrs</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">blank?</span>
  
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">group_values</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- group-source -->
          
        </div>

        

        
      </div><!-- group-method -->

    
      <div id="method-i-less_than" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">less_than</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>See documentation for <code>where</code></p>
          

          
          <div class="method-source-code" id="less_than-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">less_than</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#less_than can only be called after an appropriate where call. e.g. where(:created_at).less_than(1.day.ago)&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- less_than-source -->
          
        </div>

        

        
      </div><!-- less_than-method -->

    
      <div id="method-i-limit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">limit</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Limit a single page to <code>value</code> records</p>

<pre>Model.limit(1)
Model.per_page(50)</pre>

<p>Normally <a href="../DatastaxRails.html">SolandraObject</a> searches are
paginated at a really high number so as to effectively disable pagination. 
However, you can cause all requests to be paginated on a per-model basis by
overriding the <code>default_page_size</code> class method in your model:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Model</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">DatastaxRails</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">default_page_size</span>
    <span class="ruby-value">30</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
          

          
          <div class="method-source-code" id="limit-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">limit</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">per_page_value</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- limit-source -->
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="SearchMethods.html#method-i-per_page">per_page</a>
        </div>
        

        
      </div><!-- limit-method -->

    
      <div id="method-i-offset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">offset</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Sets an offset into the result set to start looking from</p>

<pre>Model.offset(1000)</pre>
          

          
          <div class="method-source-code" id="offset-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">offset</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">offset_value</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- offset-source -->
          
        </div>

        

        
      </div><!-- offset-method -->

    
      <div id="method-i-order" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">order</span><span
            class="method-args">(attribute)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Orders the result set by a particular attribute.  Note that text fields may
not be used for ordering as they are tokenized.  Valid candidates are
fields of type <code>string</code>, <code>integer</code>,
<code>long</code>, <code>float</code>, <code>double</code>, and
<code>time</code>.  In addition, the symbol <code>:score</code> can be used
to sort on the  relevance rating returned by Solr.  The default direction
is ascending but may be reversed by passing a hash where the field is the
key and the value is :desc</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span>)
<span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">desc</span>)
</pre>
          

          
          <div class="method-source-code" id="order-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">order</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">blank?</span>

  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">order_by</span> = <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> {<span class="ruby-identifier">attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:asc</span>}
    
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">order_values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">order_by</span> 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- order-source -->
          
        </div>

        

        
      </div><!-- order-method -->

    
      <div id="method-i-page" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">page</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Sets the page number to retrieve</p>

<pre>Model.page(2)</pre>
          

          
          <div class="method-source-code" id="page-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">page</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">page_value</span> = <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- page-source -->
          
        </div>

        

        
      </div><!-- page-method -->

    
      <div id="method-i-paginate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">paginate</span><span
            class="method-args">(options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>WillPaginate compatible method for paginating</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">paginate</span>(:<span class="ruby-identifier">page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, :<span class="ruby-identifier">per_page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
</pre>
          

          
          <div class="method-source-code" id="paginate-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge</span>({<span class="ruby-value">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value">:per_page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">30</span>})
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">page_value</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:page</span>]
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">per_page_value</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:per_page</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- paginate-source -->
          
        </div>

        

        
      </div><!-- paginate-method -->

    
      <div id="method-i-per_page" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">per_page</span><span
            class="method-args">(value)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="SearchMethods.html#method-i-limit">limit</a>
        </div>
        
      </div><!-- per_page-method -->

    
      <div id="method-i-query_parser" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">query_parser</span><span
            class="method-args">(attribute)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>By default, <a href="../DatastaxRails.html">SolandraObject</a> uses the
LuceneQueryParser.  Note that this is a change from the underlying Sunspot
gem.  Sunspot defaults to the <code>disMax</code> query parser.  If you
want to use that, then pass that in here.</p>

<p>*This only applies to fulltext queries*</p>

<pre>Model.query_parser('disMax').fulltext(&quot;john smith&quot;)</pre>
          

          
          <div class="method-source-code" id="query_parser-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">query_parser</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">blank?</span>
  
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">query_parser_value</span> = <span class="ruby-identifier">attribute</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- query_parser-source -->
          
        </div>

        

        
      </div><!-- query_parser-method -->

    
      <div id="method-i-reverse_order" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reverse_order</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Reverses the order of the results</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">reverse_order</span>
  <span class="ruby-identifier">is</span> <span class="ruby-identifier">equivalent</span> <span class="ruby-identifier">to</span>
<span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">desc</span>)

<span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">reverse_order</span>.<span class="ruby-identifier">reverse_order</span>
  <span class="ruby-identifier">is</span> <span class="ruby-identifier">equivalent</span> <span class="ruby-identifier">to</span>
<span class="ruby-constant">Model</span>.<span class="ruby-identifier">order</span>(:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">asc</span>)
</pre>
          

          
          <div class="method-source-code" id="reverse_order-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reverse_order</span>
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">reverse_order_value</span> <span class="ruby-operator">==</span> <span class="ruby-operator">!</span><span class="ruby-identifier">r</span>.<span class="ruby-identifier">reverse_order_value</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- reverse_order-source -->
          
        </div>

        

        
      </div><!-- reverse_order-method -->

    
      <div id="method-i-search" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">search</span><span
            class="method-args">(&block)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Direct access to Sunspot search method.</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">search</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">fulltext</span> <span class="ruby-string">'best pizza'</span>

  <span class="ruby-identifier">with</span> :<span class="ruby-identifier">blog_id</span>, <span class="ruby-value">1</span>
  <span class="ruby-identifier">with</span>(:<span class="ruby-identifier">published_at</span>).<span class="ruby-identifier">less_than</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">order_by</span> :<span class="ruby-identifier">published_at</span>, :<span class="ruby-identifier">desc</span>
  <span class="ruby-identifier">paginate</span> :<span class="ruby-identifier">page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, :<span class="ruby-identifier">per_page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">15</span>
  <span class="ruby-identifier">facet</span> :<span class="ruby-identifier">category_ids</span>, :<span class="ruby-identifier">author_id</span>
<span class="ruby-keyword">end</span>
</pre>

<p>It’s important to note that this will still be in the context of any
other criteria you have already specified.</p>
          

          
          <div class="method-source-code" id="search-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">search</span>(&amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">search_values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">block</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- search-source -->
          
        </div>

        

        
      </div><!-- search-method -->

    
      <div id="method-i-where" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">where</span><span
            class="method-args">(attribute)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Specifies restrictions (scoping) on the result set. Expects a hash in the
form +attribute =&gt; value+ for equality comparisons.</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">group_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1234'</span>, :<span class="ruby-identifier">active</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Y'</span>)
</pre>

<p>The value of the comparison does not need to be a scalar.  For example:</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&quot;Bob&quot;</span>, <span class="ruby-string">&quot;Tom&quot;</span>, <span class="ruby-string">&quot;Sally&quot;</span>])
<span class="ruby-constant">Model</span>.<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">age</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">18</span><span class="ruby-operator">..</span><span class="ruby-value">65</span>)
</pre>

<p>Inequality comparisons such as <a
href="SearchMethods.html#method-i-greater_than">#greater_than</a> and <a
href="SearchMethods.html#method-i-less_than">#less_than</a> are specified
via chaining:</p>

<pre>Model.where(:created_at).greater_than(1.day.ago)
Model.where(:age).less_than(65)</pre>
          

          
          <div class="method-source-code" id="where-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">where</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">blank?</span>
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)
    <span class="ruby-constant">WhereProxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">r</span>.<span class="ruby-identifier">where_values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">attribute</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- where-source -->
          
        </div>

        

        
      </div><!-- where-method -->

    
      <div id="method-i-where_not" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">where_not</span><span
            class="method-args">(attribute)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Specifies restrictions (scoping) that should not match the result set.
Expects a hash in the form +attribute =&gt; value+.</p>

<pre class="ruby"><span class="ruby-constant">Model</span>.<span class="ruby-identifier">where_not</span>(:<span class="ruby-identifier">group_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1234'</span>, :<span class="ruby-identifier">active</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'N'</span>)
</pre>
          

          
          <div class="method-source-code" id="where_not-source">
            <pre><span class="ruby-comment"># File lib/datastax_rails/relation/search_methods.rb, line 181</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">where_not</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">blank?</span>
  
  <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">where_not_values</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">attribute</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- where_not-source -->
          
        </div>

        

        
      </div><!-- where_not-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

